function deposit ( address token , uint amount ) external payable { require ( token == 0x0 || msg . value == 0 ) ; if ( token != 0x0 ) { require ( ERC20 ( token ) . transferFrom ( msg . sender , address ( this ) , amount ) ) ; } else { amount = msg . value ; } balances [ token ] [ msg . sender ] = balances [ token ] [ msg . sender ] . add ( amount ) ; Identifier_0 ( msg . sender , token , amount ) ; }